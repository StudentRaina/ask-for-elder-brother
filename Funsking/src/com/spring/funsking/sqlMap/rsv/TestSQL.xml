<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="test">

	<select id="getgu" parameterClass="java.util.HashMap"
		resultClass="java.util.HashMap">
		SELECT GUCODE,ATTR
		FROM RSVGU
	</select>


	<select id="getplace" parameterClass="java.util.HashMap"
		resultClass="java.util.HashMap">
	SELECT A.ATTR,PCODE,B.ATTR AS BATTR
	FROM RSVPLACE B,(SELECT GUCODE,ATTR
	FROM RSVGU
	WHERE GUCODE=#se1#) A
	WHERE A.GUCODE=B.GUCODE
	</select>
	
	<select id="getplace2" parameterClass="java.util.HashMap"
		resultClass="java.util.HashMap">
		SELECT DISTINCT ATTR,CONCERTSCHE	
 		FROM RSVSCHE A ,(SELECT ATTR,PCODE FROM RSVPLACE
 							WHERE PCODE=#se2#)B
 		where A.PCODE=B.PCODE
	</select>
	
 	<select id="getplace3" parameterClass="java.util.HashMap"
	resultClass="java.util.HashMap">
	select DISTINCT ATTR,A.PCODE AS PCODE
	from RSVPLACE A,(SELECT PCODE,CONCERTSCHE FROM RSVSCHE WHERE CONCERTSCHE=#dse1#) B
	WHERE A.PCODE= B.PCODE AND GUCODE=#dse2#
	</select> 
	
	<select id="getreflashplace" parameterClass="java.util.HashMap"
	resultClass="java.util.HashMap">
	SELECT ATTR FROM RSVPLACE
    WHERE PCODE=#se2#
	</select> 
	<select id="getgenre" parameterClass="java.util.HashMap"
	resultClass="java.util.HashMap">
	SELECT GENRE,ATTR FROM GENRECODE
	</select>
	
	<insert id="insertrsv" parameterClass="java.util.HashMap">
		INSERT INTO RSVPLACE(PCODE,GUCODE,SPT,GENRE,PPHOTO,DPHOTO,EPPHOTO,ATTR)
		VALUES(RSVPLACENUM.NEXTVAL,#gu#,#spt#,#genre#,#pphoto#,#dphoto#,#epphoto#,#attr#)
	</insert> 
	
</sqlMap>